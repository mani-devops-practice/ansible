- name: demo on filters
  hosts: local
  connection: local
  vars:
    topics: linux, ansible, shell, aws
    course: Devops
    tagsMap:
       name: "ansible"
       project: "roboshop"
       component: "catalogue"
    tagsList: [
        {
            "key": "name",
            "value": "ansible"
        },
        {
            "key": "project",
            "value": "roboshop"
        },
        {
            "key": "component",
            "value": "catalogue"
        }
    ]

      #  - {"key":"name", "value": "ansible"}
      #  - {"key":"project", "value": "roboshop"}  # Both are same, can be used how we like
      #  - {"key":"component", "value": "catalogue"}

      # - key: name     # We can represent key/value like below also
      #   value: ansible
      # - key: project
      #   value: roboshop
      # - key: component
      #   value: catalogue
       
  tasks:
    - name: Filters example
      ansible.builtin.debug:
        msg: "Hi Mani, {{ GREETING | default('Good day')  }}" # Making variables optinal or providing default values
    
    - name: Filter example - 2
      ansible.builtin.debug:
        msg: "{{ topics | split(',') }}"  # string to list 

    - name: map to list
      ansible.builtin.debug:
        msg: "{{ tagsMap | dict2items }}"

    - name: list/item to map
      ansible.builtin.debug:
        msg: "{{ tagsList | items2dict }}"

    - name: read yaml file # example for set fact variable
      ansible.builtin.set_fact: # Setting the variable dynamically
        student_yaml: "{{ lookup('file', 'students.yaml') | from_yaml }}"
    
    - name: convert yaml to Json
      ansible.builtin.debug:
        msg: "{{ student_yaml | to_nice_json }}"

    - name: convert to upper
      ansible.builtin.debug:
        msg: "{{ course | upper }}"
    
    - name: convert to lower
      ansible.builtin.debug:
        msg: "{{ course | lower }}"
       